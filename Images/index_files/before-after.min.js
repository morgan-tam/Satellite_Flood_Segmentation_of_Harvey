"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),BeforeAfter=function(){function e(t,i){_classCallCheck(this,e),this.el=document.querySelector(t),this.before_image=i[0],this.after_image=i[1],this.px=0,this.el?i&&2===i.length?(this.calculate_distance(),this.render(),this.init()):console.warn("Images must be an array of two"):console.warn("Element not found for before and after")}return _createClass(e,[{key:"generate_image",value:function(e,t){var i=document.createElement("img");return i.setAttribute("src",t),i.classList.add(e),i}},{key:"render",value:function(){this.before_image_el=this.generate_image("image-before",this.before_image),this.after_image_el=this.generate_image("image-after",this.after_image),this.revealer_el=document.createElement("div"),this.revealer_el.classList.add("image-revealer"),this.revealer_el.appendChild(this.after_image_el),this.el.appendChild(this.before_image_el),this.el.appendChild(this.revealer_el)}},{key:"calculate_distance",value:function(){this.distance=(window.innerWidth-parseInt(window.getComputedStyle(this.el).width))/2}},{key:"drag",value:function(e){e.touches?(this.touches=e.touches,this.px=e.touches[0].clientX-this.distance):this.px=e.clientX-this.distance,this.px<0&&(this.px=0),this.revealer_el.style.transform="translate("+this.px+"px, 0)",this.after_image_el.style.transform="translate(-"+this.px+"px, 0)"}},{key:"broadcast_iframe_height",value:function(e){window.parent&&window.parent.postMessage&&window.parent.postMessage({height:parseInt(window.getComputedStyle(e).height)},"*")}},{key:"init",value:function(){var e=this,t=function(t){e.drag(t)};window.self!==window.top&&(this.before_image_el.onload=function(){e.broadcast_iframe_height(e.el)}),this.el.addEventListener("mousemove",t,!1),this.el.addEventListener("touchmove",t,!1),window.addEventListener("resize",function(){e.calculate_distance()})}}]),e}();